{% macro print_header(dataset, author, current_user, active_tab) %}
  {% set is_author = current_user.is_authenticated and current_user.id == author['id'] %}
  <div id="dataset-header">

    <div class="row">
      <div {% if is_author %}class="col-md-6 col-lg-7"{% else %}class='col-md-6'{% endif %}>
        <h2 class="page-title">Dataset "{{ dataset['name'] }}"</h2>
      </div>
          {% if is_author %}
              <a class="btn btn-success pull-right" title="Evaluate this dataset"
                href="{{ url_for('datasets.evaluate', dataset_id=dataset['id']) }}">
                <span class="glyphicon glyphicon-tasks" aria-hidden="true"></span>
                Evaluate
              </a>
              <a class="btn btn-primary pull-right" title="Edit this dataset"
                href="{{ url_for('datasets.edit', dataset_id=dataset['id']) }}">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                Edit
              </a>
              <a class="btn btn-danger pull-right" title="Delete this dataset"
                href="{{ url_for('datasets.delete', dataset_id=dataset['id']) }}">
                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                Delete
              </a>
            {% endif %}

        <a class="btn btn-info pull-right" title="Download this dataset" 
          href="{{ url_for('datasets.download_schema_csv', dataset_id=dataset['id']) }}">
          <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span>
          Download schema
        </a>
      </div>
    </div>

    <a href="{{ url_for('user.profile', musicbrainz_id=author.musicbrainz_id) }}">
      &larr; Back to {{ "author's" if not is_author }} dataset list
    </a>

    <p id="dataset-description">{{ dataset['description'] }}</p>

    <p id="dataset-info">
      <strong>Author:</strong>
      <a href="{{ url_for('user.profile', musicbrainz_id=author.musicbrainz_id) }}">
        {{ author.musicbrainz_id }}
      </a>
      <br/><strong>Creation time:</strong>
      {{ dataset['created']|datetime }}
    </p>

    <ul class="nav nav-tabs">
      <li {{ 'class=active' if active_tab=='view' }}>
        <a href="{{ url_for('datasets.view', id=dataset['id']) }}">View</a>
      </li>
      <li {{ 'class=active' if active_tab=='evaluation' }}>
        <a href="{{ url_for('datasets.eval_info', dataset_id=dataset['id']) }}">Evaluation</a>
      </li>
    </ul>
  </div>
{% endmacro %}

{% macro render_job_status(status) %}
  {% if status == 'pending' %}
    <span class="label label-info">In queue</span>
  {% elif status == 'running' %}
    <span class="label label-primary">Running</span>
  {% elif status == 'failed' %}
    <span class="label label-danger">Failed</span>
  {% elif status == 'done' %}
    <span class="label label-success">Done</span>
  {% else %}
    <span class="label">status</span>
  {% endif %}
{% endmacro %}
